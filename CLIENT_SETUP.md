# Client Setup Guide - Tanhkapay Biometric Sync

This guide details how to install and configure the Tanhkapay Biometric Sync application on a client machine.

## 1. Prerequisites

Before installing the application, ensure the client machine meets the following requirements:

-   **Operating System**: Windows 10 or Windows 11 (64-bit).
-   **Database Connectivity**:
    -   The machine must have access to the SQL Server database where biometric data is stored.
    -   **SQL Driver**: Ensure a compatible driver is installed. We recommend **ODBC Driver 17 for SQL Server** or **SQL Server Native Client**.
        -   You can download "ODBC Driver 17 for SQL Server" from Microsoft's official website.
-   **Internet Connection**: Required to sync data to the cloud API. Start the application to test connectivity.

## 2. Installation Methods

### Method A: Standalone Executable (Recommended)

This method does **not** require Python to be installed on the client machine.

1.  **Copy Files**:
    -   Locate the `dist` folder generated by the build process.
    -   Copy the entire contents of the `dist` folder to a permanent location on the client machine (e.g., to `C:\TpayBiometricProgram`).
2.  **Verify Contents**:
    -   Ensure the folder contains `TanhkapayPythonProgram.exe`.
    -   Ensure there is a `config` subfolder containing `.env` and `settings.py`.
    -   Ensure there is an `assets` subfolder (if applicable).
3.  **Create Shortcut**:
    -   Right-click `TanhkapayPythonProgram.exe` -> "Send to" -> "Desktop (create shortcut)".

### Method B: Installer Script

If you have the `install_script.bat` along with the `dist` folder:

1.  Place the `dist` folder and `install_script.bat` in the same directory.
2.  Run `install_script.bat` as Administrator.
3.  This script will automatically copy the files to `C:\TpayBiometricProgram` and create a desktop shortcut.

## 3. Configuration

The application allows you to configure settings via its graphical interface.

1.  **Launch the Application**: Double-click the shortcut or `TanhkapayPythonProgram.exe`.
2.  **Login**:
    -   Enter the application password if prompted (default is usually blank on fresh install).
3.  **Go to Configuration Tab**:
    -   Click on the "Configuration" tab.
4.  **Database Connection**:
    -   **Server**: Enter the SQL Server instance (e.g., `.\SQLEXPRESS` or `192.168.1.100`).
    -   **Database Name**: Enter the database name.
    -   **Username/Password**: SQL authentication credentials.
    -   Click **Test Database Connection** to fail-safe verify.
5.  **API Settings**:
    -   **TP API URL**: Enter the API endpoint URL.
6.  **Application Settings**:
    -   **Run on Windows Startup**: Check this to automatically start the app with Windows.
    -   **Start Minimized**: Check this to start minimized to the tray.
    -   **Minimize to Tray**: Check this to minimize to tray on close.
7.  **Save**: Click **Save Configuration**.

## 4. Automation

To ensure data syncs automatically without manual intervention:

1.  Go to the **Dashboard** tab.
2.  **Interval**: Set the desired sync frequency (e.g., 15 minutes).
3.  **Auto-start Scheduler**: Check "Auto-start Scheduler on App Launch".
4.  Click **Start Scheduler**.
5.  Ensure **d** in the Configuration tab is checked so the app launches on reboot.

## 5. Troubleshooting

-   **"Database connection failed"**:
    -   Verify SQL Server is running.
    -   Check firewall settings on the server.
    -   Ensure the ODBC Driver is installed.
-   **Settings not saving**:
    -   Check write permissions for the installation folder.
    -   Run the application as Administrator.
-   **App closes immediately**:
    -   Check the `Logs` folder for error messages.
